<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:cxf="http://camel.apache.org/schema/blueprint/cxf"
           xsi:schemaLocation="
             http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
             http://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd
             http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd
   http://camel.apache.org/schema/blueprint/cxf ">

    <!--Rest Servers Endpoint-->
    <cxf:rsServer id="fileRestService"
                  address="http://0.0.0.0:9000"
                  serviceClass="CxfRestApi.service.FileService"
                  loggingFeatureEnabled="true">
    </cxf:rsServer>


    <!--End Rest Servers Endpoint-->

    <!--Beans-->
    <bean id="RenameFile" class="CxfRestApi.beans.RenameFile"/>
    <bean id="ErrorHandler" class="CxfRestApi.beans.ErrorHandler"/>
    <bean id="GenerateToken" class="CxfRestApi.beans.TokenBasedError"/>
    <bean id="AddToList" class="CxfRestApi.beans.AddToList"/>
    <bean id="ProcessFile" class="CxfRestApi.beans.ProcessFile" />
    <!--End Beans -->


    <camelContext xmlns="http://camel.apache.org/schema/blueprint"
                  xmlns:order="http://fabric8.com/examples/order/v7"
                  id="rest-context">



                <route id="SendFileToSource">
                    <from uri="cxfrs://bean://fileRestService"/>
                    <process ref="ProcessFile" />
                    <log loggingLevel="INFO" message="body request : ${body}"/>
                    <log loggingLevel="INFO" message="header request : ${headers}"/>
                </route>

    </camelContext>
</blueprint>
